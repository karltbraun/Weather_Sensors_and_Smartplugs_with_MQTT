# Environment Configuration Template for Weather Sensors MQTT Services
# Copy this file to .env and update the values according to your setup

# =============================================================================
# Deployment Configuration
# =============================================================================
DEPLOYMENT_SCENARIO=home-lab

# Timezone Configuration (US Pacific West Coast)
TZ=America/Los_Angeles

# =============================================================================
# MQTT Broker Configuration (REQUIRED)
# =============================================================================

# Broker Selection (selects from predefined configs in broker_config.py)
BROKER_NAME=n-vultr2
MQTT_CONFIG_INFO={}

# MQTT TLS/SSL configuration (optional)
MQTT_USE_TLS=false
MQTT_CA_CERT_PATH=
MQTT_CERT_PATH=
MQTT_KEY_PATH=

# =============================================================================
# Logging Configuration
# =============================================================================

# Console log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
CONSOLE_LOG_LEVEL=INFO

# File log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
FILE_LOG_LEVEL=DEBUG

# Clear log files on service startup (true/false)
CLEAR_LOG_FILE=true

# =============================================================================
# Sensor Republisher Service Configuration
# =============================================================================

# MQTT subscription topics for raw sensor data (comma-separated)
# Default subscribes to all raw sensor messages from any source
SUB_TOPICS_REPUBLISH="+/sensors/raw/#"

# MQTT topic for configuration updates to local_sensors.json
# Used for dynamic sensor configuration changes via MQTT
SUB_TOPIC_CONFIG_UPDATE="KTBMES/ROSA/sensors/config/local_sensors"

# Backup retention settings for configuration files
# Maximum number of backup files to keep
MAX_BACKUPS=10

# Number of days to retain backup files
BACKUP_RETENTION_DAYS=30

# Maximum interval between publishes (seconds)
# Forces republish even if no new data received
PUBLISH_INTERVAL_MAX=300

# Publication topic root for processed sensor data
PUB_TOPIC_ROOT=KTBMES

# Publication source identifier (usually hostname)
PUB_SOURCE=node-name-or-identifier

# =============================================================================
# Shelly Processor Service Configuration
# =============================================================================

# MQTT subscription topic root for Shelly devices
SUB_TOPIC_ROOT=Shelly

# MQTT subscription topics for Shelly devices (comma-separated)
# Default subscribes to all Shelly device messages
SUB_TOPICS_SHELLY="${SUB_TOPIC_ROOT}/#"

# =============================================================================
# Data Storage Configuration
# =============================================================================

# Data file dump interval (seconds)
DATA_DUMP_INTERVAL=60

# Device data file name
DEVICE_DATA_FILE=device_data.json

# Local sensors configuration file
LOCAL_SENSORS_FILE=local_sensors.json

# =============================================================================
# Service Selection (for Docker containers)
# =============================================================================

# Service to run in container (republish, shelly, bash)
# This is typically set per container in docker-compose.yml
SERVICE=weather-republish

# =============================================================================
# Advanced Configuration (Optional)
# =============================================================================

# Protocol configuration file path
PROTOCOL_CONFIG_FILE=config/rtl_433_protocols.json

# Tracked protocols configuration
TRACKED_PROTOCOLS_FILE=config/tracked_protocols.json

# Protocol categories configuration
PROTOCOL_CATEGORIES_FILE=config/protocol_categories.json

# Device check interval (seconds)
DEVICE_CHECK_INTERVAL=60

# Configuration file check interval (seconds)
CONFIG_CHECK_INTERVAL=60

# =============================================================================
# Docker Specific Configuration
# =============================================================================

# Container timezone (optional)
TZ=America/Los_Angeles

# Container user/group IDs (optional, for file permissions)
PUID=1000
PGID=1000

# =============================================================================
# Development/Debug Configuration
# =============================================================================

# Enable debug mode (adds extra logging and checks)
DEBUG_MODE=false

# Enable test mode (for development/testing)
TEST_MODE=false

# Python path adjustments (usually not needed)
PYTHONPATH=/app

# =============================================================================
# Example Configurations for Common Setups
# =============================================================================

# Using BROKER_NAME approach (recommended):
# BROKER_NAME=n-vultr2        # Uses config from broker_config.py
# BROKER_NAME=vultr2          # Alternative Vultr instance
# BROKER_NAME=pi2             # Local Raspberry Pi broker
# BROKER_NAME=local           # Local testing broker
# BROKER_NAME=eclipse         # Public Eclipse test broker

# =============================================================================
# Notes
# =============================================================================

# 1. Copy this file to .env in your project root
# 2. Set BROKER_NAME to match one of the entries in config/broker_config.py
# 3. Adjust subscription topics based on your MQTT topic structure
# 4. Log levels: DEBUG provides most detail, ERROR provides least
# 5. For production, consider using INFO or WARNING for console logs
# 6. File logs can be DEBUG for troubleshooting while keeping console clean